---
layout: post
title: 二十、QML——Model
categories: QML
tags: [QML]
---

大多数应用程序需要格式化显示数据。Qt Quick具有Models、Views、Delegate的概念，用于显示数据。它们将数据的可视化进行模块化，以便开发者和设计师可以控制数据的不同方面。开发者可以对数据做很少修改的情况下，将列表视图替换为网格视图。同样，通过将数据的一个实例封装在委托Delegate中，开发者可以决定如何呈现或处理数据。

![alt text](image.png)

- **模型 (Model)**：包含数据及其结构。QML 提供了多种类型用于创建模型。

- **视图 (View)**：用于显示数据的容器。视图可以以列表或网格的形式显示数据。

- **委托 (Delegate)**：决定数据在视图中应该如何显示。委托将模型中的每个数据单元封装起来，并通过委托可以访问数据。委托还可以将数据写回可编辑的模型中（例如，在 TextField 的 onAccepted 处理器中）。

要可视化数据，可以将视图的 `model` 属性绑定到一个模型，将 `delegate` 属性绑定到一个组件或其他兼容类型。

## 1 QStringList

`QStringList` 是由 `String` 类型的 `QList`。

```c++
using QStringList = QList<QString>;
```

这部分参考的是 [Models and Views: String ListModel Example](https://doc.qt.io/qt-6.8/qtquick-models-stringlistmodel-example.html) 示例程序。

注意：

1. 这里使用的是 `setInitialProperties` ，该方法仅仅对跟元素的属性有用。

2. `QVariant::fromValue(dataList)` 形式传入 `qml`,给模型model变量赋值，该模型的值的读取使用的是`modelData`。（仅仅对于QVariant列表）

![alt text](image-2.png)

## 2 QObjectList-based Model







## 3 QAbstractItemModel 




1. 使用 `QStringList` 作为 `model` 传入 `qml` 中，C++的 `QStringList` 数据改变，`ListView` 界面不会同步改变。

2. 

`ListModel` 例子可以参考 [/assets/Qt6/qml_20_models/DecoratingViews.qml](/assets/Qt6/qml_20_models/DecoratingViews.qml)

![alt text](image-1.png)


## 1 QAbstractItemModel 



Using C++ Models with Qt Quick Views