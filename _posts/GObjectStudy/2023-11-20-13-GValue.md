---
layout: post
title: 十三、GValue学习笔记
categories: GObject学习笔记
tags: [GObject]
---

我第一次学习GValue应该是二零二一年九月九日，那是一段最美的时光。漫山遍野你的脸庞，唯有遗忘是最漫长。那时候刚接触GLib库，我在CSDN中，给这一概念放到了GLib分类中记录，其实是错误的。

查看Gboxed相关源文件和头文件，发现是在gobject目录下。`GValue`是一个Boxed类型对象。

```c
/* filename: gboxed.h */
#define G_TYPE_VALUE (g_value_get_type ())
```

```c
/* filename: gboxed.c */
#define G_TYPE_VALUE (g_value_get_type ())
G_DEFINE_BOXED_TYPE (GValue, g_value, value_copy, value_free)
```

既然知道是GBoxed对象，那系统就没有自动申请内存和释放内存空间函数。

```c
struct _GValue
{
  /*< private >*/
  GType		g_type; /* GValue存储的数据的数据类型 */

  /* public for GTypeValueTable methods */
  union {
    gint	v_int;
    guint	v_uint;
    glong	v_long;
    gulong	v_ulong;
    gint64      v_int64;
    guint64     v_uint64;
    gfloat	v_float;
    gdouble	v_double;
    gpointer	v_pointer;
  } data[2];
};
```