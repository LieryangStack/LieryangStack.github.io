---
layout: post
title: 九、GstPoll
categories: GStreamer核心对象
tags: [GStreamer]
---

## 1  GstPoll基本概念

- GstPoll 类似于 fd_set（与 select() 一起使用）或 struct pollfd 数组（与 poll() 一起使用），用于跟踪文件描述符。一旦通过 gst_poll_new 创建，这个集合就可以用来等待文件描述符变为可读和/或可写。通过在创建集合时（或稍后调用 gst_poll_set_controllable）为 controllable 标志指定 TRUE，可以使这种等待受控。

- 新的文件描述符通过 gst_poll_add_fd 添加到集合中，并通过 gst_poll_remove_fd 移除。控制哪些文件描述符应该等待变为可读和/或可写是通过使用 gst_poll_fd_ctl_read、gst_poll_fd_ctl_write 和 gst_poll_fd_ctl_pri 来完成的。

- 使用 gst_poll_wait 等待文件描述符实际变为可读和/或可写，或者在没有文件描述符及时可用时超时。通过调用 gst_poll_restart 和 gst_poll_set_flushing 可以控制等待。

- 一旦等待了文件描述符集合，就可以使用 gst_poll_fd_has_closed 来查看文件描述符是否已关闭，使用 gst_poll_fd_has_error 来查看它是否产生了错误，使用 gst_poll_fd_can_read 来查看是否可以从文件描述符中读取，以及使用 gst_poll_fd_can_write 来查看是否可以写入文件描述符。

## 2  GstPoll类型结构

### 2.1  GstPoll类型注册宏定义

### 2.2  GstPoll类型相关枚举

### 2.3  GstPoll相关结构体

## 3  GstPoll对象相关函数