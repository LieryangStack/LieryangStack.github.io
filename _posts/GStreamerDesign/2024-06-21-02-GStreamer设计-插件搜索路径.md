---
layout: post
title: 二、GStreamer设计——插件搜索路径
categories: GStreamer设计
tags: [GStreamer]
---

## 1 搜索路径

在启动时，会在插件搜索路径中搜索插件。按以下顺序检查以下设置：

- **--gst-plugin-path**: 通过命令行选项，命令行传入搜索路径（该命令行选项是整个gst所有的，并不是gst-inspect-1.0程序仅有）。
  
- **GST_PLUGIN_PATH**: 环境变量设定搜索路径。

- **GST_PLUGIN_SYSTEM_PATH**： 环境变量设定搜索路径 。

- **默认搜索路径**：比如:`/usr/lib/x86_64-linux-gnu/gstreamer-1.0`和`/usr/lib/aarch64-linux-gnu/gstreamer-1.0`，也就是GStreamer库文件当前目录会新建一个`gstreamer-1.0`存储插件库。

<font color="red">注意：gstreamer搜索目录的时候，会进行递归所有目录搜索</font>

![alt text](/assets/GStreamerDesign/2_plugin_search_path/image-2.png)

## 2 问题总结

### 2.1 环境变量之间的区别

如果未设置 `GST_PLUGIN_SYSTEM_PATH`，会搜索默认搜索路径，如果设置了 `GST_PLUGIN_SYSTEM_PATH` 就不会搜索默认的搜索路径，例子如下：

#### 2.1.1 GST_PLUGIN_SYSTEM_PATH

可以看到使用该环境变量后，就不会查找默认搜索路径

![alt text](/assets/GStreamerDesign/2_plugin_search_path/image.png)

#### 2.1.2 GST_PLUGIN_PATH

可以看到使用该环境变量后，还会查找默认搜索路径

![alt text](/assets/GStreamerDesign/2_plugin_search_path/image-1.png)

